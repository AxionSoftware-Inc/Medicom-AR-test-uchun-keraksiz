<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Compact Indoor Nav</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>

  <style>
    body { margin: 0; overflow: hidden; font-family: sans-serif; }
    
    #ui-container {
      position: fixed; bottom: 40px; left: 0; width: 100%; text-align: center; z-index: 999;
    }
    
    #instruction {
      background: rgba(0,0,0,0.6); color: white; padding: 8px 15px; 
      border-radius: 15px; display: inline-block; margin-bottom: 15px; font-size: 16px;
    }

    button {
      background: #28a745; color: white; border: none; padding: 12px 40px;
      font-size: 18px; border-radius: 50px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
  </style>
</head>

<body>

  <div id="ui-container">
    <div id="instruction">Telefonni 180¬∞ orqaga o'giring üîÑ</div>
    <br>
    <button id="next-btn" onclick="nextStep()">Eshikka keldim</button>
  </div>

  <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false" renderer="logarithmicDepthBuffer: true;">

    <a-entity camera look-controls position="0 0 0"></a-entity>

    <a-entity id="step-1">
        
        <a-cone position="0 -1.6 1.0" rotation="90 0 0" radius-bottom="0.03" height="0.1" color="red"></a-cone>
        
        <a-text value="Start" position="0 -1.4 1.0" align="center" scale="0.5 0.5 0.5" look-at="[camera]" color="white"></a-text>

        <a-cone position="0 -1.6 1.5" rotation="90 0 0" radius-bottom="0.03" height="0.1" color="yellow"></a-cone>
        <a-text value="Eshik" position="0 -1.4 1.5" align="center" scale="0.5 0.5 0.5" look-at="[camera]" color="yellow"></a-text>
    </a-entity>

    <a-entity id="step-2" visible="false">
        
        <a-text value="O'ngga ->" position="0 -1.4 1.5" color="#00ff66" align="center" scale="0.8 0.8 0.8" look-at="[camera]"></a-text>

        <a-cone position="-0.8 -1.6 1.5" rotation="90 0 90" radius-bottom="0.03" height="0.1" color="#00ff66"></a-cone>
        <a-cone position="-1.6 -1.6 1.5" rotation="90 0 90" radius-bottom="0.03" height="0.1" color="#00ff66"></a-cone>
        <a-cone position="-2.4 -1.6 1.5" rotation="90 0 90" radius-bottom="0.03" height="0.1" color="#00ff66"></a-cone>

        <a-box position="-3.0 -1.6 1.5" color="blue" scale="0.2 0.2 0.2" animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"></a-box>
        <a-text value="MANZIL" position="-3.0 -1.3 1.5" color="white" align="center" scale="1 1 1" look-at="[camera]"></a-text>
    </a-entity>

  </a-scene>

  <script>
    let currentStep = 1;

    function nextStep() {
      const step1 = document.getElementById('step-1');
      const step2 = document.getElementById('step-2');
      const btn = document.getElementById('next-btn');
      const text = document.getElementById('instruction');

      if (currentStep === 1) {
        step1.setAttribute('visible', 'false');
        step2.setAttribute('visible', 'true');
        text.innerText = "O'ngga buriling va to'g'riga yuring";
        btn.innerText = "Yetib keldim";
        currentStep = 2;
      } else {
        text.innerText = "Manzilga yetdingiz! üèÅ";
        btn.style.display = 'none';
        // step2.setAttribute('visible', 'false'); // Xohlasangiz manzil ham o'chadi
      }
    }
  </script>

</body>
</html>